@model AzureHF.Models.Tree.Node
@using AzureHF.Helpers

@{
    ViewBag.Title = "Home Page";
}

@section scripts
{
    <script type="text/javascript">

        $('#jstree').jstree();
        $("#selectable").selectable();

        //$('#jstree').jstree({
        //    "core": {
        //        "animation": 0,
        //        "check_callback": true,
        //        "themes": { "stripes": true }//,
        //        //'data': {
        //        //    'url': function (node) {
        //        //        return node.id === '#' ?
        //        //          'ajax_demo_roots.json' : 'ajax_demo_children.json';
        //        //    },
        //        //    'data': function (node) {
        //        //        return { 'id': node.id };
        //        //    }
        //        //}
        //    },
        //    "types": {
        //        "#": {
        //            "max_children": 1,
        //            "max_depth": 4,
        //            "valid_children": ["root"]
        //        },
        //        "root": {
        //            "icon": "/static/3.3.3/assets/images/tree_icon.png",
        //            "valid_children": ["default"]
        //        },
        //        "default": {
        //            "valid_children": ["default", "file"]
        //        },
        //        "file": {
        //            "icon": "glyphicon glyphicon-file",
        //            "valid_children": []
        //        }
        //    },
        //    "plugins": [
        //      "contextmenu", "dnd", "search",
        //      "state", "types"
        //    ]
        //});

        var modal = document.getElementById('myModal');

        // Get the button that opens the modal
        var btn = document.getElementById("createBtn");

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks the button, open the modal
        btn.onclick = function () {
            modal.style.display = "block";
        }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        function validateForm(event) {
            document.getElementById('hiddenFieldId').value = $(".jstree-clicked").parent().attr("data-nodeid");
        };

    </script>

}


<div style="width: 35%; float:left; margin-top:20px ">

    <div style="display:inline-block">
        <button id="createBtn" style="float:left; margin-right: 5px">Create</button>
        <button style="float:left">Delete</button>
    </div>

    <div id="jstree" style="display:block">

        @Html.CreateTree(Model)

    </div>
</div>

<div style="width: 65%; height:100%; float:right; margin-top:20px; ">

    <div style="display:inline-block">
        <button style="float:left; margin-right: 5px">Upload</button>
        <button style="float:left; margin-right: 5px">Download</button>
        <button style="float:left">Delete</button>
    </div>

    <div style="display:block; border-left: 2px solid black">
        <ol id="selectable">
            <li class="ui-widget-content">Item 1</li>
            <li class="ui-widget-content">Item 2</li>
            <li class="ui-widget-content">Item 3</li>
            <li class="ui-widget-content">Item 4</li>
            <li class="ui-widget-content">Item 5</li>
            <li class="ui-widget-content">Item 6</li>
            <li class="ui-widget-content">Item 7</li>
        </ol>
    </div>
</div>

@using (Html.BeginForm("AddDirectory", "Home", FormMethod.Post, new { onsubmit = "return validateForm(event);" }))
{

    <fieldset>
        <!-- The Modal -->
        <div id="myModal" class="modal">

            <input type="hidden" id="hiddenFieldId" name="parent" value="kkk" />

            <!-- Modal content -->
            <div class="modal-content" style="width: 40%">

                <div class="modal-header" >
                    <span class="close">×</span>
                    <h2 style="color:#d9e3cb">Mappa hozzáadása</h2>
                </div>
                <div class="modal-body">
                    <span>Mappa neve:</span>
                    <input type="text" name="name" />
                </div>
                <div class="modal-footer">
                    @*<h3>Modal Footer</h3>*@
                    <button type="submit">Add directory</button>
                </div>
            </div>
        </div>
    </fieldset>

}
